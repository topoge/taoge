import{t as i}from"./tableFlow.31edb31e.js";import{d as o}from"./datePicker.1a087a29.js";import{n}from"./index.621e7bf7.js";import"./vendor.c31495b0.js";var p=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-row",[t("el-col",{attrs:{span:24}},[t("k-search-card",{scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{directives:[{name:"throttle",rawName:"v-throttle"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.getWalletTradeList()}}},[e._v("\u67E5\u8BE2")]),t("el-button",{directives:[{name:"throttle",rawName:"v-throttle"}],attrs:{size:"mini"},on:{click:function(a){e.resetQuery(),e.dateTime=[],e.getWalletTradeList()}}},[e._v("\u91CD\u7F6E")])]},proxy:!0}])},[t("el-form",{staticStyle:{display:"flex","flex-flow":"row wrap",gap:"10px"},attrs:{inline:!0,size:"small"},nativeOn:{submit:function(a){a.preventDefault()}}},[t("el-form-item",{attrs:{label:"\u4EA4\u6613\u7C7B\u578B"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"\u8BF7\u9009\u62E9",size:"small"},model:{value:e.query.trade_type,callback:function(a){e.$set(e.query,"trade_type",a)},expression:"query.trade_type"}},e._l(e.$dict.tradeType,function(a,l){return t("el-option",{key:l,attrs:{label:a.label,value:a.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u4EA4\u6613\u72B6\u6001"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"\u8BF7\u9009\u62E9",size:"small"},model:{value:e.query.trade_status,callback:function(a){e.$set(e.query,"trade_status",a)},expression:"query.trade_status"}},e._l(e.$dict.tradeStatus,function(a,l){return t("el-option",{key:l,attrs:{label:a.label,value:a.value}})}),1)],1),t("el-form-item",{attrs:{label:"\u4EA4\u6613\u7F16\u53F7"}},[t("el-input",{attrs:{maxlength:"64"},model:{value:e.query.trade_no,callback:function(a){e.$set(e.query,"trade_no",a)},expression:"query.trade_no"}})],1),t("el-form-item",{attrs:{label:"\u9009\u62E9\u65F6\u95F4"}},[t("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4",align:"right","value-format":"timestamp"},model:{value:e.dateTime,callback:function(a){e.dateTime=a},expression:"dateTime"}})],1),t("el-form-item",{attrs:{label:"\u4EA4\u6613\u6807\u9898"}},[t("el-input",{attrs:{maxlength:"32"},model:{value:e.query.subject,callback:function(a){e.$set(e.query,"subject",a)},expression:"query.subject"}})],1),t("el-form-item",{attrs:{label:"\u94B1\u5305\u7F16\u53F7"}},[t("el-input",{model:{value:e.query.wallet_no,callback:function(a){e.$set(e.query,"wallet_no",a)},expression:"query.wallet_no"}})],1),t("el-form-item",{attrs:{label:"\u7528\u6237\u624B\u673A\u53F7"}},[t("el-input",{model:{value:e.query.mobile,callback:function(a){e.$set(e.query,"mobile",a)},expression:"query.mobile"}})],1)],1)],1),t("k-table",{attrs:{headers:e.headers,data:e.data,"is-pagination":"",total:e.total,loading:e.loading,"zoom-height":e.isComponent?140:130,toolbar:"",reload:e.getWalletTradeList},on:{changePage:e.getWalletTradeList},scopedSlots:e._u([{key:"item.trade_type",fn:function(a){var l=a.scope;return[l.row.trade_type===1?t("el-tag",{attrs:{size:"mini"}},[e._v("\u5145\u503C")]):e._e(),l.row.trade_type===2?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("\u63D0\u73B0")]):e._e(),l.row.trade_type===3?t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("\u4ED8\u6B3E")]):e._e(),l.row.trade_type===4?t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("\u6536\u6B3E")]):e._e(),l.row.trade_type===5?t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("\u4F17\u7B79\u5145\u503C")]):e._e()]}},{key:"item.pay_type",fn:function(a){var l=a.scope;return[l.row.pay_type===1?t("span",[e._v("\u5FAE\u4FE1")]):e._e(),l.row.pay_type===8?t("span",[e._v("\u94B1\u5305")]):e._e()]}},{key:"item.trade_status",fn:function(a){var l=a.scope;return[l.row.trade_status==="CREATE"?t("el-tag",{attrs:{size:"mini"}},[e._v("\u521B\u5EFA")]):e._e(),l.row.trade_status==="WAITPAY"?t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("\u7B49\u5F85\u652F\u4ED8")]):e._e(),l.row.trade_status==="SUCCESS"?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("\u5B8C\u6210")]):e._e(),l.row.trade_status==="CANCEL"?t("el-tag",{attrs:{size:"mini",type:"info"}},[e._v("\u53D6\u6D88")]):e._e(),l.row.trade_status==="REFUND"?t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("\u9000\u6B3E")]):e._e()]}},{key:"item.user",fn:function(a){var l=a.scope;return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:l.row.mobile,placement:"top-start"}},[t("span",[e._v(e._s(l.row.nickname?l.row.nickname:l.row.mobile))])])]}}])})],1)],1)},u=[];const d={name:"WalletTrade",mixins:[i,o],props:{isComponent:{type:Boolean,default:!1},walletNo:{type:String}},data(){return{headers:[{label:"id",prop:"id",width:50},{label:"\u94B1\u5305\u7F16\u53F7",prop:"wallet_no",tooltip:!0},{label:"\u4EA4\u6613\u53F7",prop:"trade_no",tooltip:!0},{label:"\u4EA4\u6613\u7C7B\u578B",prop:"trade_type"},{label:"\u5916\u90E8\u8BA2\u5355\u53F7",prop:"out_trade_no",tooltip:!0},{label:"\u652F\u4ED8\u7C7B\u578B",prop:"pay_type"},{label:"\u4EA4\u6613\u6807\u9898",prop:"subject",tooltip:!0},{label:"\u4EA4\u6613\u72B6\u6001",prop:"trade_status"},{label:"\u652F\u4ED8\u91D1\u989D",prop:"pay_amount"},{label:"\u7528\u6237",prop:"user"},{label:"\u652F\u4ED8\u65F6\u95F4",prop:"pay_time",tooltip:this.isComponent,type:"date",formart:"YYYY-MM-DD HH:mm:ss"},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"created_at",tooltip:this.isComponent,type:"date",formart:"YYYY-MM-DD HH:mm:ss"}],data:[],query:{trade_type:null,trade_status:null,trade_no:null,subject:null,wallet_no:this.walletNo?this.walletNo:null,start_time:null,end_time:null,mobile:null}}},mounted(){this.getWalletTradeList()},methods:{async getWalletTradeList(e={page:1,limit:10}){this.loading=!0;try{this.dateTime.length!==0&&(this.query.start_time=this.dateTime[0]/1e3,this.query.end_time=this.dateTime[1]/1e3);let r=Object.assign(e,this.$libs.filterNullObject(this.query)),t=await this.$api.walletTrade.batchQuery(r);this.data=t.data.data,this.total=t.data.total}catch{}finally{this.loading=!1}}}},s={};var c=n(d,p,u,!1,_,"222cb11d",null,null);function _(e){for(let r in s)this[r]=s[r]}var v=function(){return c.exports}();export{v as default};
