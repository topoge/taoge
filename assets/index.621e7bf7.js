var pe=Object.defineProperty,_e=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var E=(e,t,s)=>t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_=(e,t)=>{for(var s in t||(t={}))he.call(t,s)&&E(e,s,t[s]);if(P)for(var s of P(t))fe.call(t,s)&&E(e,s,t[s]);return e},C=(e,t)=>_e(e,me(t));import{V as m,E as ve,m as x,a as ge,b,x as y,C as be,c as ye,e as v,d as R,f as j,g as we,i as $e,h as L,D as xe,p as Ce}from"./vendor.c31495b0.js";const ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};ke();m.use(ve);var Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-view")},Te=[];function u(e,t,s,a,r,n,i,o){var d=typeof e=="function"?e.options:e;t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),a&&(d.functional=!0),n&&(d._scopeId="data-v-"+n);var h;if(i?(h=function(f){f=f||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!f&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(f=__VUE_SSR_CONTEXT__),r&&r.call(this,f),f&&f._registeredComponents&&f._registeredComponents.add(i)},d._ssrRegister=h):r&&(h=o?function(){r.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:r),h)if(d.functional){d._injectStyles=h;var g=d.render;d.render=function(de,A){return h.call(A),g(de,A)}}else{var $=d.beforeCreate;d.beforeCreate=$?[].concat($,h):[h]}return{exports:e,options:d}}const Ae={name:"App",metaInfo(){return{title:this.$store.state.config.site_name?this.$store.state.config.site_name:""}}},O={};var Pe=u(Ae,Se,Te,!1,Ee,"3c9078c2",null,null);function Ee(e){for(let t in O)this[t]=O[t]}var Re=function(){return Pe.exports}(),je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-aside",{class:{"hide-aside":e.isHideAside,"aside-dark":e.$store.getters["settings/asideTheme"]}},[s("router-link",{attrs:{to:"/"}},[s("div",{staticClass:"aside-header"},[s("img",{staticClass:"logo",attrs:{src:e.$config.staticUrl()+e.config.site_logo,alt:""}}),s("h1",[e._v(e._s(e.config.site_name))])])]),s("k-menu")],1)},Le=[];const Oe={name:"Menu",props:["isHideAside"],data(){return{User:[["\u7528\u6237\u7BA1\u7406","account_circle"],["\u89D2\u8272\u7BA1\u7406","supervisor_account"],["\u5206\u7EC4\u7BA1\u7406","groups"],["\u6743\u9650\u7BA1\u7406","privacy_tip"]]}},mounted(){},computed:C(_({},x({user:e=>e.user,config:e=>e.config})),{drawer:{get(){return this.isHideAside},set(e){this.$emit("update:isHideAside",e)}}})},D={};var De=u(Oe,je,Le,!1,Fe,"49a5bf8b",null,null);function Fe(e){for(let t in D)this[t]=D[t]}var Ie=function(){return De.exports}(),Be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header",class:{"fold-header":e.isHideAside}},[s("el-header",[s("div",{staticClass:"app-bar"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},[s("div",{staticClass:"header-menu",staticStyle:{"margin-right":"5px"}},[s("span",{staticClass:"material-icons",on:{click:function(a){return e.$emit("click")}}},[e._v("menu")]),s("span",{staticClass:"material-icons",on:{click:function(a){return e.reload()}}},[e._v("refresh")])]),s("k-breadcrumb")],1),s("el-col",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"flex-end",gap:"10px"}},[e._t("right"),s("span",{staticClass:"material-icons",staticStyle:{"font-size":"20px"},on:{click:function(a){e.drawer.visible=!0}}},[e._v("settings")])],2)],1)],1)]),s("k-tabbar"),s("k-drawer",{attrs:{visible:e.drawer.visible,size:"350px","is-header":!1,"destroy-on-close":""},on:{"update:visible":function(a){return e.$set(e.drawer,"visible",a)}}},[s("el-divider",{attrs:{"content-position":"center"}},[e._v("\u83DC\u5355\u98CE\u683C")]),s("div",{staticClass:"aside-menu-theme-wrap"},[s("div",{staticClass:"item",class:{active:!e.asideTheme},on:{click:function(a){return e.$store.commit("settings/setAsideTheme",!1)}}}),s("div",{staticClass:"item dark",class:{active:e.asideTheme},on:{click:function(a){return e.$store.commit("settings/setAsideTheme",!0)}}})])],1)],1)},Ue=[];const Ve={name:"Header",props:["isHideAside"],data(){return{drawer:{visible:!1}}},inject:["reload"],computed:_({},ge("settings",["asideTheme"])),methods:_({},b(["logout"]))},F={};var Me=u(Ve,Be,Ue,!1,ze,"43b7cb0c",null,null);function ze(e){for(let t in F)this[t]=F[t]}var He=function(){return Me.exports}(),Ne=function(){var e=this,t=this,s=t.$createElement,a=t._self._c||s;return a("el-card",{ref:"wrap",staticClass:"table-card",style:{border:t.isCard?"":"none"},attrs:{shadow:"never","body-style":{padding:t.isCard?"":"0"}}},[t.$slots.header||t.toolbar?a("div",{staticClass:"table-header",attrs:{slot:"header"},slot:"header"},[a("div",[t._t("header")],2),t.toolbar?a("div",{staticClass:"toolbar"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"\u91CD\u8F7D\u6570\u636E",placement:"top","open-delay":500}},[t.reload?a("span",{staticClass:"material-icons",on:{click:function(r){return t.reload({page:t.pagination.currentPage,limit:t.pagination.limit})}}},[t._v("autorenew")]):t._e()]),a("el-dropdown",{attrs:{trigger:"click","hide-on-click":!1,size:"small"},on:{command:function(r){e.tableSize=r}}},[a("span",{staticClass:"material-icons"},[t._v("unfold_more")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{class:{"el-dropdown-menu__item-select":t.tableSize==="medium"},attrs:{command:"medium"}},[t._v("\u4E2D\u7B49")]),a("el-dropdown-item",{class:{"el-dropdown-menu__item-select":t.tableSize==="small"},attrs:{command:"small"}},[t._v("\u9ED8\u8BA4")]),a("el-dropdown-item",{class:{"el-dropdown-menu__item-select":t.tableSize==="mini"},attrs:{command:"mini"}},[t._v("\u7D27\u51D1")])],1)],1),a("el-dropdown",{attrs:{trigger:"click",size:"small","hide-on-click":!1}},[a("span",{staticClass:"material-icons"},[t._v("tune")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t.reload?a("el-dropdown-item",[a("el-checkbox",{model:{value:t.isReload,callback:function(r){t.isReload=r},expression:"isReload"}},[t._v("\u81EA\u52A8\u91CD\u8F7D")])],1):t._e(),a("el-dropdown-item",[a("el-checkbox",{on:{change:function(r){r?e.showColumn=Object.keys(e.headers).map(Number):e.showColumn=[],e.showColumn.length===0?e.column=[]:e.column=e.headers}},model:{value:t.showAllColumn,callback:function(r){t.showAllColumn=r},expression:"showAllColumn"}},[t._v("\u5C55\u793A\u7684\u5217 ")])],1),a("el-checkbox-group",{on:{change:t.filterColumn},model:{value:t.showColumn,callback:function(r){t.showColumn=r},expression:"showColumn"}},t._l(t.headers,function(r,n){return a("el-dropdown-item",{key:n,attrs:{divided:n===0}},[a("el-checkbox",{attrs:{label:n}},[t._v(t._s(r.label))])],1)}),1)],1)],1),a("span",{staticClass:"material-icons-outlined",on:{click:t.exportExcel}},[t._v("description")])],1):t._e()]):t._e(),a("div",{staticClass:"table",style:{maxHeight:"calc(100vh - "+t.maxHeight+"px)"}},[a("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",class:{"table-row-click":t.$listeners["row-click"]},staticStyle:{width:"100%"},attrs:{size:t.tableSize}},"el-table",t.$attrs,!1),t.new$listeners),[t.showExpand?a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(r){return[t._t("expand-item",null,{scope:r})]}}],null,!0)}):t._e(),t._l(t.column,function(r,n){return r.hidden!==!0?[t.type.includes(r.type)?a("el-table-column",{attrs:{label:r.label,type:r.type,index:r.index,width:r.width,align:r.align}}):a("el-table-column",{key:n,attrs:{prop:r.prop,label:r.label,width:r.width,align:r.align?r.align:t.align,sortable:r.sortable},scopedSlots:t._u([{key:"default",fn:function(i){return[t._t("item."+r.prop,function(){return[r.tooltip?a("el-tooltip",{attrs:{effect:"dark","open-delay":500,content:r.type==="date"?t.$dayjs.unix(i.row[r.prop]).format(r.format?r.format:"YYYY-MM-DD HH:mm"):i.row[r.prop],placement:"top"}},[a("span",{staticClass:"text-overflow"},[t._v(" "+t._s(r.type==="date"?t.$dayjs.unix(i.row[r.prop]).format(r.format?r.format:"YYYY-MM-DD HH:mm"):i.row[r.prop])+" ")])]):[a("span",{class:{"text-overflow":r.overflow}},[t._v(" "+t._s(r.type==="date"?t.$dayjs.unix(i.row[r.prop]).format(r.format?r.format:"YYYY-MM-DD HH:mm"):i.row[r.prop])+" ")])]]},{scope:i})]}}],null,!0)})]:t._e()})],2)],1),t.isPagination?a("div",{staticClass:"table-footer",class:{"close-page":!t.isPagination}},[t.isPagination?a("el-pagination",{attrs:{layout:t.pagination.layout,total:t.total,"current-page":t.pagination.currentPage,"page-size":t.pagination.limit,"page-sizes":t.pagination.pageSizes},on:{"update:currentPage":function(r){return t.$set(t.pagination,"currentPage",r)},"update:current-page":function(r){return t.$set(t.pagination,"currentPage",r)},"update:pageSize":function(r){return t.$set(t.pagination,"limit",r)},"update:page-size":function(r){return t.$set(t.pagination,"limit",r)},"update:pageSizes":function(r){return t.$set(t.pagination,"pageSizes",r)},"update:page-sizes":function(r){return t.$set(t.pagination,"pageSizes",r)},"size-change":t.changePage,"current-change":t.changePage}}):t._e()],1):t._e()])},qe=[];const We={name:"Table",props:{tableName:{type:String,default:"\u6570\u636E"},isCard:{type:Boolean,default:!0},headers:{type:Array,required:!0},isPagination:{type:Boolean,default:!1},total:{type:Number},zoomHeight:{type:Number,default:0},loading:{type:Boolean,default:!1},showExpand:{type:Boolean,default:!1},align:{type:String},toolbar:{type:Boolean,default:!1},reload:{type:Function}},data(){return{tableSize:"small",showAllColumn:!0,showColumn:this.headers.length>0?Object.keys(this.headers).map(Number):[],isReload:!1,type:["index","selection"],pagination:{layout:"prev, pager, next, total,sizes, jumper",limit:10,currentPage:1,pageSizes:[10,20,30,40,50,100]},expandFlag:0,tableHeight:100,column:Object.assign({},this.headers),route:"",isTask:this.isReload}},computed:{maxHeight(){let e=182;return this.$slots.header&&(e+=57),this.isPagination&&(e+=25),e+this.zoomHeight+1},new$listeners(){return this.$listeners["expand-change"]?Object.assign(this.$listeners,{"expand-change":this.changeExpand}):this.$listeners}},watch:{isReload(e){this.isTask=e},"$route.path"(e,t){this.isTask=e===this.route&&this.isReload}},mounted(){this.route=this.$route.path,this.taskReload()},methods:{changePage(e){this.$emit("changePage",{page:this.pagination.currentPage,limit:this.pagination.limit})},changeExpand(e,t){t.length>1&&this.$attrs.data.forEach(a=>{JSON.stringify(a)!==JSON.stringify(e)&&this.$refs.table.toggleRowExpansion(a,!1)});let s=this.expandFlag===0||this.expandFlag===1;t.length===0&&(s=!1),this.expandFlag=t.length,this.$emit("expand-change",s,e)},filterColumn(e){e.sort();let t=[];for(let s of e)t.push(this.headers[s]);this.showAllColumn=e.length===this.headers.length,this.column=t},async taskReload(){setTimeout(async()=>{this.isTask&&await this.reload({page:this.pagination.currentPage,limit:this.pagination.limit}),this.taskReload()},2e3)},async exportExcel(){let e=[];for(let n of this.$attrs.data){let i={};for(let o of this.headers)if(!(o.export===!1||o.prop==="action"))if(o.func)i[o.prop]=o.func(n);else{if(o.type==="date"){i[o.prop]=this.$dayjs.unix(n[o.prop]).format(o.format?o.format:"YYYY-MM-DD HH:mm");continue}i[o.prop]=n[o.prop]}e.push(i)}let t=[];for(let n of this.headers)n.export===!1||n.prop==="action"||t.push(n.label);let s=y.utils.json_to_sheet(e);const a=y.utils.decode_range(s["!ref"]);for(let n=a.s.c;n<=a.e.c;n++){const i=y.utils.encode_col(n)+"1";s[i].h=t[n],s[i].r="<t>"+t[n]+"</t>",s[i].w=t[n],s[i].v=s[i].w}let r=y.utils.book_new();y.utils.book_append_sheet(r,s),y.writeFile(r,`${this.tableName}.xlsx`)}}},I={};var Ye=u(We,Ne,qe,!1,Je,"15e11c2d",null,null);function Je(e){for(let t in I)this[t]=I[t]}var Ge=function(){return Ye.exports}(),Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-drawer",e._g(e._b({attrs:{"with-header":!1}},"el-drawer",e.$attrs,!1),e.$listeners),[s("i",{staticClass:"el-icon-close",on:{click:e.close}}),s("div",{staticClass:"wrap"},[e._t("default")],2)])},Qe=[];const Xe={name:"Sidebar",data(){return{}},methods:{close(){this.$emit("update:visible",!1)}}},B={};var Ze=u(Xe,Ke,Qe,!1,et,"1949a6e3",null,null);function et(e){for(let t in B)this[t]=B[t]}var tt=function(){return Ze.exports}();var st=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",e._b({ref:"dialog",attrs:{visible:e.dialogVisible,width:"50%",fullscreen:e.fullscreen,"show-close":!1,"append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(a){e.dialogVisible=a},open:e.openDialog,opened:e.openedDialog}},"el-dialog",e.$attrs,!1),[s("el-row",{attrs:{slot:"title",type:"flex",justify:"space-between",align:"center"},slot:"title"},[s("span",{staticClass:"el-dialog__title"},[e._v("\u88C1\u526A\u56FE\u7247")]),s("div",[s("i",{staticClass:"el-icon-full-screen text-md header-btn",on:{click:e.switchFullscreen}}),s("i",{staticClass:"el-icon-close text-md header-btn",on:{click:function(a){e.dialogVisible=!1}}})])]),s("div",{staticClass:"cropper-box"},[s("div",{staticClass:"image-box"},[s("div",{staticClass:"image-cropper"},[s("img",{ref:"img",staticStyle:{display:"block","max-width":"100%"},attrs:{src:e.src,id:"img",alt:""}})])]),s("div",{ref:"preview-box",staticClass:"preview-box"},[s("div",{ref:"preview",staticClass:"preview"})])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(a){e.dialogVisible=!1}}},[e._v("\u53D6 \u6D88")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveCrop}},[e._v("\u786E \u5B9A")])],1)],1)},at=[];let U=!1;const rt={name:"Cropper",props:{aspectRatio:{default:1},openCropper:{default:!1},croppedCanvas:{default:()=>({width:200,height:200})},fileType:{default:"image/jpeg"},quality:{default:1}},data(){return{src:null,raw:null,fullscreen:!1,image:null,cropper:null,cropImgBlob:null,cropImgDataUrl:null,tmpAspectRatio:null,tmpFinishCrop:null,tmpCancelCrop:null}},computed:{dialogVisible:{get(){return this.openCropper},set(e){this.closeCropper(e)}}},mounted(){},destroyed(){this.cropper=null},methods:{initCropper(){this.image=this.$refs.img,this.cropper=new be(this.image,{aspectRatio:this.aspectRatio,viewMode:1,zoomOnWheel:!1,cropBoxResizable:!0,minCropBoxWidth:10,minCropBoxHeight:10,ready(e){let t=document.getElementById("img").cloneNode();t.className="",t.style.cssText="display: block;width: 100%;min-width: 0;min-height: 0;max-width: none;max-height: none;",document.querySelectorAll(".preview").item(0).innerHTML="",document.querySelectorAll(".preview").item(0).appendChild(t.cloneNode()),U=!0},crop(e){if(!U)return;let t=e.detail,a=this.cropper.getImageData(),r=t.width/t.height,n=document.querySelectorAll(".preview").item(0);if(!n)return;let i=n.getElementsByTagName("img").item(0),o=n.offsetWidth,d=o/r,h=t.width/o;n.style.height=d+"px",!!i&&(i.style.width=a.naturalWidth/h+"px",i.style.height=a.naturalHeight/h+"px",i.style.marginLeft=-t.x/h+"px",i.style.marginTop=-t.y/h+"px")}})},openDialog(){this.fullscreen=!1},openedDialog(){this.cropper?this.cropper.replace(this.src):this.initCropper(),this.cropper.setAspectRatio(this.tmpAspectRatio!==null?this.tmpAspectRatio:this.aspectRatio)},switchFullscreen(){this.fullscreen=!this.fullscreen,this.cropper.replace(this.src),this.cropper.reset()},closeCropper(e=!1){e?this.tmpCancelCrop=null:(this.tmpAspectRatio=null,this.tmpFinishCrop=null,this.tmpCancelCrop?this.tmpCancelCrop():this.$emit("cancelCrop")),this.$emit("update:openCropper",e)},async saveCrop(){let e=this.croppedCanvas;this.raw.type==="image/jpeg"&&(e=Object.assign(this.croppedCanvas,{fillColor:"#FFFFFF"}));let t=await this.cropper.getCroppedCanvas(e);this.cropImgDataUrl=await t.toDataURL(this.raw.type,this.quality),await t.toBlob(s=>{this.cropImgBlob=s,this.tmpFinishCrop?this.tmpFinishCrop():this.$emit("finishCrop"),this.dialogVisible=!1},this.raw.type,this.quality)}}},V={};var nt=u(rt,st,at,!1,it,"08389f64",null,null);function it(e){for(let t in V)this[t]=V[t]}var ot=function(){return nt.exports}(),lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"inline-block"},on:{click:function(a){return a.stopPropagation(),e.handleClick.apply(null,arguments)}}},[s("el-upload",e._b({ref:"upload",class:{"avatar-uploader":!e.$slots.trigger},attrs:{action:"#","auto-upload":!1,"show-file-list":!1,"on-change":e.cropImg},scopedSlots:e._u([{key:"trigger",fn:function(){return[e._t("trigger",function(){return[e.cropPreview?s("el-image",{staticClass:"avatar",style:e.showBoxSize,attrs:{src:e.cropPreview}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:e.showBoxSize}),e.cropPreview?s("span",{staticClass:"el-upload-action"},[s("i",{staticClass:"el-icon-zoom-in avatar-uploader-icon el-upload-delete",on:{click:function(a){a.stopPropagation(),e.dialogVisible=!0}}}),s("i",{staticClass:"el-icon-delete avatar-uploader-icon el-upload-delete",on:{click:function(a){return a.stopPropagation(),e.removeUploadImg.apply(null,arguments)}}})]):e._e()]})]},proxy:!0},{key:"tip",fn:function(){return[e._t("tip")]},proxy:!0}],null,!0)},"el-upload",e.$attrs,!1)),s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(a){e.dialogVisible=a}}},[s("div",{staticClass:"preview"},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.cropPreview,alt:""}})])]),e.isCropper?s("k-cropper",e._b({ref:"cropper",attrs:{"append-to-body":!0,"open-cropper":e.openCropper},on:{"update:openCropper":function(a){e.openCropper=a},"update:open-cropper":function(a){e.openCropper=a},finishCrop:e.uploadImg}},"k-cropper",e.$attrs,!1)):e._e()],1)},ct=[];const ut={name:"UploadImage",props:{isCropper:{type:Boolean,default:!0},showBox:{type:Array,default:()=>[100,100]},upload:{type:Function,required:!0}},data(){return{dialogVisible:!1,openCropper:!1,cropPreview:""}},computed:{showBoxSize(){return{width:this.showBox[0]+"px",height:this.showBox[1]+"px"}}},beforeDestroy(){this.cropPreview=""},methods:{cropImg(e){this.isCropper?(this.$refs.cropper.src=URL.createObjectURL(e.raw),this.$refs.cropper.raw=e.raw,this.$refs.cropper.dialogVisible=!0):(this.cropPreview=URL.createObjectURL(e.raw),this.upload(e.raw))},removeUploadImg(e){this.cropPreview="",this.$emit("delete")},async uploadImg(){try{let e=this.$refs.cropper.cropImgBlob,t=new File([e],"file.jpg",{type:e.type});this.cropPreview=this.$refs.cropper.cropImgDataUrl,this.upload(t)}catch(e){this.$message.error(e.message)}finally{}},async handleClick(){this.$refs.upload.disabled&&this.$emit("click")},async beforeUpload(){}}},M={};var dt=u(ut,lt,ct,!1,pt,"020d2dba",null,null);function pt(e){for(let t in M)this[t]=M[t]}var _t=function(){return dt.exports}(),mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"upload-wrap"},[s("el-row",{attrs:{type:"flex",gutter:15}},e._l(e.list,function(a,r){return s("el-col",{key:r},[a.loading?s("div",{staticClass:"item-progress",style:e.showBoxSize},[s("el-progress",{attrs:{type:"circle",percentage:e.progress,width:e.showBox[0]-10}})],1):e._e(),a.loading?e._e():s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","auto-upload":!1,"show-file-list":!1,"on-change":e.cropVideo,accept:"video/mp4,video/webm"}},[a.cropPreview?s("el-image",{staticClass:"avatar",style:e.showBoxSize,attrs:{src:a.cropPreview}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon",style:e.showBoxSize}),a.status?s("label",{staticClass:"item-status-label"},[s("i",{staticClass:"el-icon-upload-success el-icon-check"})]):e._e(),a.video?s("label",{staticClass:"item-index-label"},[s("i",[e._v(e._s(r+1))])]):e._e(),a.cropPreview?s("span",{staticClass:"el-upload-action"},[s("i",{staticClass:"el-icon-video-play avatar-uploader-icon el-upload-delete",on:{click:function(n){return n.stopPropagation(),e.videoPlay(a)}}}),s("i",{staticClass:"el-icon-delete avatar-uploader-icon el-upload-delete",on:{click:function(n){return n.stopPropagation(),e.removeUploadImg(r)}}})]):e._e()],1)],1)}),1),s("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0,fullscreen:e.fullscreen,title:"\u9884\u89C8"},on:{"update:visible":function(a){e.dialogVisible=a}}},[s("el-row",{attrs:{slot:"title",type:"flex",justify:"space-between",align:"center"},slot:"title"},[s("span",{staticClass:"el-dialog__title"},[e._v("\u9884\u89C8")]),s("div",[s("i",{staticClass:"el-icon-full-screen text-md header-btn",on:{click:function(a){e.fullscreen=!e.fullscreen}}}),s("i",{staticClass:"el-icon-close text-md header-btn",on:{click:function(a){e.dialogVisible=!1}}})])]),s("div",{staticClass:"preview"},[s("video",{ref:"video",staticStyle:{"max-height":"50vh"},style:{maxHeight:e.fullscreen?"80vh":"50vh"},attrs:{src:e.play,controls:""}})])],1)],1)},ht=[];const ft={name:"UploadVideo",props:{isCropper:{type:Boolean,default:!0},showBox:{type:Array,default:()=>[100,100]},upload:{type:Function,required:!0},limit:{type:Number,default:1}},data(){return{fullscreen:!1,item:{cropPreview:"",video:null,loading:!1,status:!1},list:[],dialogVisible:!1,openCropper:!1,cropPreview:"",progress:0,play:{}}},computed:{showBoxSize(){return{width:this.showBox[0]+"px",height:this.showBox[1]+"px"}}},mounted(){this.list.push(Object.assign({},this.item))},methods:{async cropVideo(e,t){let s=this.list[this.list.length-1];this.progress=0,s.video=e.raw,s.loading=!0,this.$libs.videoCover(e.raw).then(a=>{s.cropPreview=a}).catch(a=>{s.cropPreview=""}),await this.upload(e.raw).then(a=>{this.list[this.list.length-1].status=!0,this.list.length<this.limit&&this.list.push(Object.assign({},this.item))}).catch(a=>{s.cropPreview=""}),s.loading=!1},removeUploadImg(e){this.list.splice(e,1),this.list.length===0&&this.list.push(Object.assign({},this.item));let t=Object.assign({},this.list[e]);this.$emit("delete",{index:e,video:t})},clearVideo(){this.list=[],this.list.push(Object.assign({},this.item))},videoPlay(e){e.video instanceof File?this.play=URL.createObjectURL(e.video):this.play=e.video,this.dialogVisible=!0,this.$nextTick(()=>{this.$refs.video.play()})},async initValue(e,t="video",s=""){let a=[];for(let r of e){let n=Object.assign({},this.item);n.video=s+r[t],(async()=>{n.cropPreview=await this.$libs.videoCover(n.video).then(i=>i).catch(i=>"")})(),a.push(n)}this.list.length<this.limit&&a.push(Object.assign({},this.item)),this.list=a}}},z={};var vt=u(ft,mt,ht,!1,gt,"57830352",null,null);function gt(e){for(let t in z)this[t]=z[t]}var bt=function(){return vt.exports}(),yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",e._b({attrs:{visible:e.visible,"destroy-on-close":!1,"append-to-body":!0,fullscreen:e.fullscreen,title:"\u9884\u89C8"},on:{"update:visible":function(a){e.visible=a}}},"el-dialog",e.$attrs,!1),[e.visible?s("el-row",{attrs:{slot:"title",type:"flex",justify:"space-between",align:"center"},slot:"title"},[s("span",{staticClass:"el-dialog__title"},[e._v("\u9884\u89C8")]),e.$attrs.title?s("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.$attrs.title))]):e._e(),s("div",[s("i",{staticClass:"el-icon-full-screen text-md header-btn",on:{click:function(a){e.fullscreen=!e.fullscreen}}}),s("i",{staticClass:"el-icon-close text-md header-btn",on:{click:function(a){e.visible=!1}}})])]):e._e(),s("div",{staticClass:"preview"},[e.type==="image"&&e.visible?s("img",{attrs:{src:e.src,alt:""}}):e._e(),e.type==="video"&&e.visible?s("video",{ref:"video",staticStyle:{"max-height":"50vh"},style:{maxHeight:e.fullscreen?"80vh":"50vh"},attrs:{src:e.src,controls:""}}):e._e(),e.type==="audio"&&e.visible?s("audio",{ref:"audio",attrs:{src:e.src,controls:""}}):e._e()])],1)},wt=[];const $t={name:"Preview",props:{show:{type:Boolean,default:!1},type:{type:String},src:{typ:String}},data(){return{fullscreen:!1}},computed:{visible:{get(){return this.show},set(e){this.$emit("update:show",e)}}}},H={};var xt=u($t,yt,wt,!1,Ct,"433812e8",null,null);function Ct(e){for(let t in H)this[t]=H[t]}var kt=function(){return xt.exports}(),St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-checkbox",e._b({staticClass:"checkbox"},"el-checkbox",e.$attrs,!1),[e._t("default")],2)},Tt=[];const At={name:"checkbox"},N={};var Pt=u(At,St,Tt,!1,Et,"a90cc56e",null,null);function Et(e){for(let t in N)this[t]=N[t]}var Rt=function(){return Pt.exports}(),jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-radio",e._b({staticClass:"radio"},"el-radio",e.$attrs,!1),[e._t("default")],2)},Lt=[];const Ot={name:"Radio"},q={};var Dt=u(Ot,jt,Lt,!1,Ft,"10b8527e",null,null);function Ft(e){for(let t in q)this[t]=q[t]}var It=function(){return Dt.exports}(),Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tabs"},[s("el-tabs",{on:{"tab-remove":e.removeTab,"tab-click":e.selectTab},model:{value:e.currentTab.name,callback:function(a){e.$set(e.currentTab,"name",a)},expression:"currentTab.name"}},e._l(e.tabs,function(a,r){return s("el-tab-pane",{key:a.name,attrs:{label:a.title,name:a.name,closable:a.closable}})}),1),s("el-dropdown",{attrs:{size:"small"},on:{command:e.closeTab}},[s("span",{staticClass:"material-icons expand"},[e._v("expand_more")]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{icon:"el-icon-arrow-left",command:"left"}},[e._v("\u5173\u95ED\u5DE6\u4FA7")]),s("el-dropdown-item",{attrs:{icon:"el-icon-arrow-right",command:"right"}},[e._v("\u5173\u95ED\u53F3\u4FA7")]),s("el-dropdown-item",{attrs:{icon:"el-icon-close",command:"other"}},[e._v("\u5173\u95ED\u5176\u4ED6")]),s("el-dropdown-item",{attrs:{icon:"el-icon-error",command:"all"}},[e._v("\u5173\u95ED\u5168\u90E8")])],1)],1)],1)},Ut=[];const Vt={name:"TabBar",data(){return{}},computed:_({},x("tabBar",["tabs","currentTab"])),methods:_({async initTabs(){},async selectTab(e){await this.setCurrentTab(this.tabs[e.index]),this.currentTab.path!==this.$route.path&&await this.$router.push(this.tabs[e.index].path)},async removeTab(e){await this.deleteTab(e),this.currentTab.path!==this.$route.path&&await this.$router.push(this.currentTab.path)},async closeTab(e){let t=this.tabs.findIndex(s=>s.name===this.currentTab.name);switch(e){case"left":{for(let s=t-1;s>0;s--)await this.deleteTab(s);break}case"right":{for(let s=t+1;s<this.tabs.length;)await this.deleteTab(s);break}case"other":{let s=this.tabs.filter(a=>a.name!==this.currentTab.name);for(let a of s)await this.deleteTab(a.name);break}case"all":{let s=JSON.parse(JSON.stringify(this.tabs));for(let a of s)await this.deleteTab(a.name);break}}}},b("tabBar",["addTab","setCurrentTab","deleteTab","fixedTab"]))},W={};var Mt=u(Vt,Bt,Ut,!1,zt,"4ae07044",null,null);function zt(e){for(let t in W)this[t]=W[t]}var Ht=function(){return Mt.exports}(),Nt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadcrumbList,function(a,r){return a.meta&&a.meta.title&&a.meta.breadcrumb!==!1?s("el-breadcrumb-item",{key:r},[s("router-link",{attrs:{to:{path:a.path}}},[e._v(e._s(a.meta.title))])],1):e._e()}),1)},qt=[];const Wt={name:"Breadcrumb",data(){return{breadcrumbList:[]}},watch:{$route(e){this.getBreadcrumb()}},mounted(){this.getBreadcrumb()},methods:{async getBreadcrumb(){this.breadcrumbList=this.$route.matched}}},Y={};var Yt=u(Wt,Nt,qt,!1,Jt,"7b645e9e",null,null);function Jt(e){for(let t in Y)this[t]=Y[t]}var Gt=function(){return Yt.exports}(),Kt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.menus,function(a,r){return[a.route!==""?s("router-link",{attrs:{to:""+a.route}},[s("el-menu-item",{attrs:{index:""+a.route}},[s("i",{staticClass:"material-icons"},[e._v(e._s(a.menu_icon))]),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(a.permission_name))])])],1):s("el-submenu",{attrs:{index:a.id.toString()}},[s("template",{slot:"title"},[s("i",{staticClass:"material-icons"},[e._v(e._s(a.menu_icon))]),s("span",[e._v(e._s(a.permission_name))])]),s("menu-item",{attrs:{menus:a.children}})],2)]})],2)},Qt=[];const Xt={name:"menu-item",props:{menus:{type:Array,default:()=>[]}}},J={};var Zt=u(Xt,Kt,Qt,!1,es,"75a4905a",null,null);function es(e){for(let t in J)this[t]=J[t]}var ts=function(){return Zt.exports}(),ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{attrs:{"default-active":e.$route.path,"unique-opened":""}},[s("menu-item",{attrs:{menus:e.menus}})],1)},as=[];const rs={name:"Menu",components:{MenuItem:ts},computed:_({},x({user:e=>e.user,menus:e=>e.permission.menu}))},G={};var ns=u(rs,ss,as,!1,is,"fc94ae10",null,null);function is(e){for(let t in G)this[t]=G[t]}var os=function(){return ns.exports}(),ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-drawer",e._g(e._b({attrs:{visible:e.show,withHeader:!1,size:e.isFullscreen?"100%":e.size,"append-to-body":"","destroy-on-close":""},on:{"update:visible":function(a){e.show=a}}},"el-drawer",e.$attrs,!1),e.$listeners),[e.isHeader?s("div",{staticClass:"header"},[e._t("title",function(){return[s("div",[e._v(e._s(e.title))])]}),s("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},[e.isFullscreen?s("span",{staticClass:"material-icons",on:{click:function(a){e.isFullscreen=!e.isFullscreen,e.$emit("fullscreen",!1)}}},[e._v("fullscreen_exit")]):s("span",{staticClass:"material-icons",on:{click:function(a){e.isFullscreen=!e.isFullscreen,e.$emit("fullscreen",!0)}}},[e._v("fullscreen")]),s("span",{staticClass:"material-icons",on:{click:function(a){e.show=!1}}},[e._v("close")])])],2):e._e(),s("el-divider",{staticClass:"divider"}),s("div",{staticClass:"wrap"},[s("div",{staticClass:"content",style:{maxHeight:e.$slots.footer?"calc(100% - 64px)":"100%"}},[e._t("default")],2),e.$slots.footer?s("div",[s("el-divider",{staticClass:"divider"}),s("div",{staticClass:"footer"},[e._t("footer")],2)],1):e._e()])],1)},cs=[];const us={name:"Drawer",props:{isHeader:{type:Boolean,default:!0},isPin:{type:Boolean,default:!0},visible:{type:Boolean},title:{type:String,default:""},size:{type:String}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},data(){return{isFullscreen:!1}},methods:{}},K={};var ds=u(us,ls,cs,!1,ps,"5d8941d4",null,null);function ps(e){for(let t in K)this[t]=K[t]}var _s=function(){return ds.exports}(),ms=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"descriptions"},[e.title?s("div",{staticClass:"descriptions-title"},[e._v(e._s(e.title))]):e._e(),s("div",{staticClass:"descriptions-view"},[s("el-row",{staticClass:"descriptions-row",staticStyle:{display:"flex","flex-flow":"row nowrap"},attrs:{gutter:10}},[Boolean(e.$slots.default)?e._t("default"):e._e()],2),e.divider?s("el-divider"):e._e()],1)])},hs=[];const fs={name:"Descriptions",props:{title:{type:String},span:{type:Number},column:{type:Object,default:()=>({xs:24})},bottom:{type:String},divider:{type:Boolean,default:!1}}},Q={};var vs=u(fs,ms,hs,!1,gs,"8f338378",null,null);function gs(e){for(let t in Q)this[t]=Q[t]}var bs=function(){return vs.exports}(),ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-col",{attrs:{span:e.width,xs:e.columnFlex.xs,sm:e.columnFlex.sm,md:e.columnFlex.md,lg:e.columnFlex.lg,xl:e.columnFlex.xl}},[s("div",{staticClass:"descriptions-item",style:{paddingBottom:e.$parent.$parent.bottom}},[e.label?s("div",{staticClass:"descriptions-item-label",style:{width:e.labelWidth}},[e._v(e._s(e.label)+"\uFF1A")]):e._e(),s("div",{staticClass:"descriptions-item-value"},[Boolean(e.$slots.default)?e._t("default"):e._e()],2)])])},ws=[];const $s={name:"DescriptionsItem",props:{label:{type:String},labelWidth:{type:String,default:""},span:{type:Number},column:{type:Object,default:()=>({xs:24})}},computed:{width(){return this.span?this.span:this.$parent.$parent.span},columnFlex(){return this.column?this.column:this.$parent.$parent.column}}},X={};var xs=u($s,ys,ws,!1,Cs,"40d50410",null,null);function Cs(e){for(let t in X)this[t]=X[t]}var ks=function(){return xs.exports}(),Ss={name:"RemoteScript",props:{src:{type:String,required:!0}},render(e,t){return e("script",{attrs:{type:"text/javascript",src:this.src}})}},Ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"search-card",staticStyle:{"margin-bottom":"20px"},attrs:{shadow:"never"}},[s("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between","align-items":"center"}},[e._t("default"),s("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[e._t("footer")],2)],2)])},As=[];const Ps={name:"SearchCard"},Z={};var Es=u(Ps,Ts,As,!1,Rs,"5806cfc2",null,null);function Rs(e){for(let t in Z)this[t]=Z[t]}var js=function(){return Es.exports}(),Ls=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",e._b({attrs:{shadow:"never"},scopedSlots:e._u([{key:"header",fn:function(){return[e._t("header-icon"),e._t("header")]},proxy:!0}],null,!0)},"el-card",e.$attrs,!1),[e._t("default")],2)},Os=[];const Ds={name:"Card"},ee={};var Fs=u(Ds,Ls,Os,!1,Is,"42368ef6",null,null);function Is(e){for(let t in ee)this[t]=ee[t]}var Bs=function(){return Fs.exports}(),Us=e=>{e.component("k-aside",Ie),e.component("k-header",He),e.component("k-breadcrumb",Gt),e.component("k-menu",os),e.component("k-table",Ge),e.component("k-sidebar",tt),e.component("k-tabbar",Ht),e.component("k-cropper",ot),e.component("k-preview",kt),e.component("k-checkbox",Rt),e.component("k-radio",It),e.component("k-drawer",_s),e.component("k-card",Bs),e.component("k-search-card",js),e.component("k-descriptions",bs),e.component("k-descriptions-item",ks),e.component("k-upload-image",_t),e.component("k-upload-video",bt),e.component("remote-script",Ss)},Vs={inserted(e,t){t.value||e.remove()}},Ms={bind(e,t){let s=t.value,a=s&&s.time!==void 0?s.time:2e3,r,n=0;e.addEventListener(s&&s.event?s.event:"click",i=>{!r&&n===0?(n++,r=setTimeout(()=>{r=null,n=0},a)):i&&i.stopImmediatePropagation()},!0)}},zs=e=>{e.directive("permission",Vs),e.directive("throttle",Ms)};const Hs="modulepreload",te={},Ns="https://cdn.jsdelivr.net/gh/topoge/taoge@master/",p=function(t,s){return!s||s.length===0?t():Promise.all(s.map(a=>{if(a=`${Ns}${a}`,a in te)return;te[a]=!0;const r=a.endsWith(".css"),n=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${n}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":Hs,r||(i.as="script",i.crossOrigin=""),i.href=a,document.head.appendChild(i),r)return new Promise((o,d)=>{i.addEventListener("load",o),i.addEventListener("error",d)})})).then(()=>t())};var qs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-wrapper",attrs:{id:"particles-js"}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("\u5531\u7247\u53D1\u884C\u7CFB\u7EDF"),s("el-divider",{attrs:{direction:"vertical"}}),e._v("\u767B\u5F55")],1)]),s("el-form",{attrs:{"label-position":"right"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.login.apply(null,arguments)}}},[s("el-form-item",[s("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u7528\u6237\u540D"},model:{value:e.form.username,callback:function(a){e.$set(e.form,"username",a)},expression:"form.username"}})],1),s("el-form-item",[s("el-input",{attrs:{"prefix-icon":"el-icon-unlock",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}})],1),s("el-form-item",[s("el-row",{attrs:{type:"flex",gutter:10,align:"center"}},[s("el-col",{attrs:{span:14}},[s("el-input",{attrs:{"prefix-icon":"el-icon-s-help",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},model:{value:e.form.captcha,callback:function(a){e.$set(e.form,"captcha",a)},expression:"form.captcha"}})],1),s("el-col",{attrs:{span:10}},[s("el-image",{staticClass:"capcha-image",attrs:{src:e.captcha,fit:"cover",lazy:""},on:{click:e.getCaptcha}})],1)],1)],1),s("el-form-item",[s("el-button",{directives:[{name:"throttle",rawName:"v-throttle"}],staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.login}},[e._v("\u767B\u5F55")])],1)],1)],1)],1)},Ws=[];const Ys={name:"Login",data(){return{loading:!1,captcha:"",form:{username:"",password:"",captcha:"",key:""},formRules:{mobile:[{pattern:/^1[3-9]\d{9}$/,required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u624B\u673A\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,max:18,message:"\u957F\u5EA6\u57286 \u5230 18 \u4E2A\u5B57\u7B26",trigger:"blur"}]}}},mounted(){this.getCaptcha()},methods:{async login(){this.loading=!0;try{await this.$store.dispatch("login",this.form)}catch(e){e&&await this.getCaptcha()}finally{this.loading=!1}},async getCaptcha(){this.$api.login.verify().then(e=>{this.captcha=window.atob(e.data),this.form.key=e.data.key})}}},se={};var Js=u(Ys,qs,Ws,!1,Gs,"d4cee6a8",null,null);function Gs(e){for(let t in se)this[t]=se[t]}var Ks=function(){return Js.exports}(),Qs={data(){return{isHideAside:!1,isRouterAlive:!0}},computed:_({},x("tabBar",["cachedViews","currentTab"])),provide(){return{reload:this.reload}},mounted(){this.init().then(e=>{})},methods:C(_({},b("tabBar",["fixedTab","deleteTab","addTab","deleteCachedView","addCachedView"])),{async init(){let e={title:"\u9996\u9875",name:"Analysis",path:"/analysis",cacheTab:"Analysis",closable:!1};await this.fixedTab(e)},async reload(){let e=Object.assign({},this.currentTab);await this.deleteCachedView(e),this.isRouterAlive=!1,this.$nextTick(()=>{this.isRouterAlive=!0,this.addCachedView(e)})}})},Xs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticClass:"application"},[s("k-aside",{attrs:{isHideAside:e.isHideAside}}),s("el-container",[s("k-header",{attrs:{"is-hide-aside":e.isHideAside},on:{click:function(a){e.isHideAside=!e.isHideAside}},scopedSlots:e._u([{key:"right",fn:function(){return[s("el-dropdown",{attrs:{trigger:"hover"}},[s("span",{staticClass:"el-dropdown-link"},[e._v(e._s(e.$store.state.user.username?e.$store.state.user.username:e.$store.state.user.mobile))]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("router-link",{attrs:{to:"/profile"}},[s("el-dropdown-item",{attrs:{icon:"el-icon-user"}},[e._v("\u4E2A\u4EBA\u4E2D\u5FC3")])],1),s("el-dropdown-item",{attrs:{icon:"el-icon-switch-button"},nativeOn:{click:function(a){return e.logout.apply(null,arguments)}}},[e._v("\u9000\u51FA")])],1)],1)]},proxy:!0}])}),s("el-main",{class:{"fold-main":e.isHideAside}},[s("div",{staticClass:"page-content"},[s("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[s("keep-alive",{attrs:{include:e.cachedViews}},[e.isRouterAlive?s("router-view"):e._e()],1)],1)],1)])],1)],1)},Zs=[];const ea={name:"Manage",mixins:[Qs],methods:_({},b(["logout"]))},ae={};var ta=u(ea,Xs,Zs,!1,sa,"7347d65a",null,null);function sa(e){for(let t in ae)this[t]=ae[t]}var aa=function(){return ta.exports}(),ra="https://cdn.jsdelivr.net/gh/topoge/taoge@master/assets/403.cd155002.svg",na=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"center",height:"calc(100vh - 100px)"}},[s("el-image",{attrs:{src:e.noPermissionSvg}}),s("div",{staticStyle:{"margin-left":"100px"}},[s("p",[e._v("\u62B1\u6B49\uFF0C\u4F60\u65E0\u6743\u8BBF\u95EE\u8BE5\u9875\u9762")]),s("router-link",{attrs:{to:"/"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.deleteTab("NoPermission")}}},[e._v("\u8FD4\u56DE\u9996\u9875")])],1)],1)],1)},ia=[];const oa={name:"NoPermission",data(){return{noPermissionSvg:ra}},methods:_({},b("tabBar",["deleteTab"]))},re={};var la=u(oa,na,ia,!1,ca,"15732c9e",null,null);function ca(e){for(let t in re)this[t]=re[t]}var ua=function(){return la.exports}(),da="https://cdn.jsdelivr.net/gh/topoge/taoge@master/assets/404.17896f5a.svg",pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center","justify-content":"center",height:"calc(100vh - 100px)"}},[s("el-image",{attrs:{src:e.emptySvg}}),s("div",{staticStyle:{"margin-left":"100px"}},[s("p",[e._v("\u62B1\u6B49\uFF0C\u4F60\u8BBF\u95EE\u7684\u9875\u9762\u4E0D\u5B58\u5728")]),s("router-link",{attrs:{to:"/"}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.closePage()}}},[e._v("\u8FD4\u56DE\u9996\u9875")])],1)],1)],1)},_a=[];const ma={name:"Empty",data(){return{emptySvg:da}},computed:_({},x("tabBar",["tabs"])),methods:C(_({},b("tabBar",["deleteTab"])),{closePage(){this.tabs.filter(e=>{(e.name==="Empty"||e.name==="AnyEmpty")&&this.deleteTab(e.name)})}})},ne={};var ha=u(ma,pa,_a,!1,fa,"4ca43cba",null,null);function fa(e){for(let t in ne)this[t]=ne[t]}var va=function(){return ha.exports}(),ga=[{name:"NoPermission",path:"403",component:ua,meta:{title:"\u65E0\u8BBF\u95EE\u6743\u9650"}},{name:"Empty",path:"404",component:va,meta:{title:"\u9875\u9762\u4E0D\u5B58\u5728"}}];const ba=()=>p(()=>import("./Admin.fb03bf77.js"),["assets/Admin.fb03bf77.js","assets/Promote.ec648972.css","assets/Permission.157971ff.js","assets/Permission.3fa68b3a.css","assets/tableFlow.31edb31e.js","assets/vendor.c31495b0.js"]),ya=()=>p(()=>import("./Role.69de9e6e.js"),["assets/Role.69de9e6e.js","assets/Promote.ec648972.css","assets/Permission.157971ff.js","assets/Permission.3fa68b3a.css","assets/tableFlow.31edb31e.js","assets/vendor.c31495b0.js"]),wa=()=>p(()=>import("./Permission.4bb1c8f9.js"),["assets/Permission.4bb1c8f9.js","assets/Permission.a94b8d37.css","assets/tableFlow.31edb31e.js","assets/vendor.c31495b0.js"]),$a=()=>p(()=>import("./Profile.ff85a679.js"),["assets/Profile.ff85a679.js","assets/Profile.174b45e2.css","assets/tableFlow.31edb31e.js","assets/vendor.c31495b0.js"]),xa=()=>p(()=>import("./Song.ce9376ee.js"),["assets/Song.ce9376ee.js","assets/Song.4d470ac2.css","assets/tableFlow.31edb31e.js","assets/AttachmentDialog.c144c957.js","assets/AttachmentDialog.85f27299.css","assets/Attachment.3fb88322.js","assets/Attachment.0357a2d9.css","assets/datePicker.1a087a29.js","assets/TreeSelect.ebdd8ea4.js","assets/Promote.ec648972.css","assets/vendor.c31495b0.js"]),Ca=()=>p(()=>import("./Picture.c63f01da.js"),["assets/Picture.c63f01da.js","assets/Picture.09a6c361.css","assets/tableFlow.31edb31e.js","assets/Attachment.3fb88322.js","assets/Attachment.0357a2d9.css","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),ka=()=>p(()=>import("./SongCategory.019c5671.js"),["assets/SongCategory.019c5671.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/vendor.c31495b0.js"]),Sa=()=>p(()=>import("./Order.5e3f3025.js"),["assets/Order.5e3f3025.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ta=()=>p(()=>import("./Crowdfunding.c2072ca9.js"),["assets/Crowdfunding.c2072ca9.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/Order.5e3f3025.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Aa=()=>p(()=>import("./Promote.7117f0e1.js"),["assets/Promote.7117f0e1.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/AttachmentDialog.c144c957.js","assets/AttachmentDialog.85f27299.css","assets/Attachment.3fb88322.js","assets/Attachment.0357a2d9.css","assets/datePicker.1a087a29.js","assets/Song.ce9376ee.js","assets/Song.4d470ac2.css","assets/TreeSelect.ebdd8ea4.js","assets/vendor.c31495b0.js"]),Pa=()=>p(()=>import("./UserLog.b32f51a6.js"),["assets/UserLog.b32f51a6.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ea=()=>p(()=>import("./ExceptionLog.9826a8bc.js"),["assets/ExceptionLog.9826a8bc.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ra=()=>p(()=>import("./AdminLog.7bf2f10b.js"),["assets/AdminLog.7bf2f10b.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),ja=()=>p(()=>import("./User.90d623c2.js"),["assets/User.90d623c2.js","assets/User.6a517a8d.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/Order.5e3f3025.js","assets/Promote.ec648972.css","assets/vendor.c31495b0.js","assets/Wallet.e2a61763.js","assets/Wallet.66e75a95.css","assets/WalletTrade.db3e0ccf.js","assets/WalletDetail.cc6fc8dd.js"]),La=()=>p(()=>import("./Analysis.5483c23b.js"),["assets/Analysis.5483c23b.js","assets/Analysis.c6fe961b.css","assets/vendor.c31495b0.js","assets/TreeSelect.ebdd8ea4.js","assets/Promote.ec648972.css"]),Oa=()=>p(()=>import("./Setting.7a760795.js"),["assets/Setting.7a760795.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/AttachmentDialog.c144c957.js","assets/AttachmentDialog.85f27299.css","assets/Attachment.3fb88322.js","assets/Attachment.0357a2d9.css","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Da=()=>p(()=>import("./Wallet.e2a61763.js"),["assets/Wallet.e2a61763.js","assets/Wallet.66e75a95.css","assets/tableFlow.31edb31e.js","assets/WalletTrade.db3e0ccf.js","assets/Promote.ec648972.css","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js","assets/WalletDetail.cc6fc8dd.js"]),Fa=()=>p(()=>import("./WalletTrade.db3e0ccf.js"),["assets/WalletTrade.db3e0ccf.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ia=()=>p(()=>import("./WalletDetail.cc6fc8dd.js"),["assets/WalletDetail.cc6fc8dd.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ba=()=>p(()=>import("./BusinessLog.7913eb70.js"),["assets/BusinessLog.7913eb70.js","assets/Promote.ec648972.css","assets/tableFlow.31edb31e.js","assets/datePicker.1a087a29.js","assets/vendor.c31495b0.js"]),Ua=[{name:"Login",path:"/login",component:Ks,meta:{tab:!1}},{path:"/",component:aa,redirect:"/analysis",meta:{title:"\u9996\u9875",tab:!1},children:[{name:"Analysis",path:"analysis",component:La,meta:{title:"\u9996\u9875",breadcrumb:!1,closable:!1}},{name:"Profile",path:"profile",component:$a,meta:{title:"\u4E2A\u4EBA\u4E2D\u5FC3"}},{name:"Song",path:"song",component:xa,meta:{title:"\u6B4C\u66F2\u7BA1\u7406"}},{name:"SongCategory",path:"song/category",component:ka,meta:{title:"\u6B4C\u66F2\u5206\u7C7B"}},{name:"User",path:"user",component:ja,meta:{title:"\u7528\u6237\u7BA1\u7406"}},{name:"Picture",path:"picture",component:Ca,meta:{title:"\u56FE\u7247\u7BA1\u7406"}},{name:"Crowdfunding",path:"crowdfunding",component:Ta,meta:{title:"\u4F17\u7B79\u7BA1\u7406"}},{name:"Order",path:"order",component:Sa,meta:{title:"\u8BA2\u5355\u7BA1\u7406"}},{name:"Promote",path:"promote",component:Aa,meta:{title:"\u63A8\u5E7F\u7BA1\u7406"}},{name:"Wallet",path:"wallet",component:Da,meta:{title:"\u7528\u6237\u94B1\u5305"}},{name:"WalletTrade",path:"walletTrade",component:Fa,meta:{title:"\u4EA4\u6613\u6D41\u6C34"}},{name:"WalletDetail",path:"walletDetail",component:Ia,meta:{title:"\u4F59\u989D\u660E\u7EC6"}},{name:"AuthAdmin",path:"auth/admin",component:ba,meta:{title:"\u7BA1\u7406\u5458\u7BA1\u7406"}},{name:"AuthRole",path:"auth/role",component:ya,meta:{title:"\u89D2\u8272\u7BA1\u7406"}},{name:"AuthPermission",path:"auth/permission",component:wa,meta:{title:"\u6743\u9650\u7BA1\u7406"}},{name:"AdminLog",path:"system/AdminLog",component:Ra,meta:{title:"\u7BA1\u7406\u5458\u65E5\u5FD7"}},{name:"UserLog",path:"system/userLog",component:Pa,meta:{title:"\u7528\u6237\u65E5\u5FD7"}},{name:"ExceptionLog",path:"system/exceptionLog",component:Ea,meta:{title:"\u5F02\u5E38\u65E5\u5FD7"}},{name:"BusinessLog",path:"system/businessLog",component:Ba,meta:{title:"\u4E1A\u52A1\u65E5\u5FD7"}},{name:"SystemSetting",path:"system/setting",component:Oa,meta:{title:"\u7CFB\u7EDF\u8BBE\u7F6E"}},...ga]}],Va="https://music.maxxiang.com/",ie={baseUrl(){return Va},apiUrl(){return this.baseUrl()+"api/manage/"},staticUrl(){return"https://kz-jingyue-music.oss-cn-shanghai.aliyuncs.com/"}};function oe(e,t=0,s=null,a=null){let r=[];for(let n of e){let i=JSON.parse(JSON.stringify(n));if(i.parent_id===t){s&&(i[s]=i[a],i.key=i.id,i.value=i.id);let o=oe(e,i.id,s,a);o.length&&(i.children=o),r.push(i)}}return r}function Ma(e){let t=[],s=a=>{for(let r of a)r.children&&r.children.length>0&&(t.push(r),s(r.children))};return s(e),t}function za(e,t=" "){let s=[[7,5],[30,3],[91,4],[365,1e9]],a=["\u5468","\u6708","\u5B63","\u5E74"];for(let n=0;n<s.length;n++){let i=Math.round(e/86400/s[n][0]*100)/100;if(i>=1&&i<s[n][1])return{str:i+t+a[n],value:i,key:s[n][0]}}let r=Math.round(e/86400*1e3)/1e3;return r?{str:r+t+"\u5929",value:r,key:7}:{str:"0"+t+"\u5929",value:r,key:365}}function Ha(e,t){for(let s of Object.keys(e))s in t&&(e[s]=t[s]);return e}function le(e){return[].concat(...e.map(t=>Array.isArray(t)?le(t):t))}function Na(e){return Array.from(new Set(e))}function qa(e){return e.filter(t=>e.indexOf(t)!==e.lastIndexOf(t))}function Wa(e){return t=>t.filter(s=>t.indexOf(s)===t.lastIndexOf(s))}function Ya(e,t=!1){let s={};for(let a in e)e.hasOwnProperty(a)&&e[a]!=null&&!t&&e[a]!==!1&&(s[a]=e[a]);return s}async function Ja(e,t=0,s=0,a=!1){return new Promise((r,n)=>{try{let i=document.createElement("video");i.setAttribute("crossOrigin","anonymous"),i.currentTime=t,i.autoplay=!0,i.muted=!0,i.loop=!0,e instanceof File?i.src=window.URL.createObjectURL(e):i.src=e,i.play().then(o=>{}).catch(o=>{n(o)}),i.addEventListener("loadeddata",function(){setTimeout(()=>{let o=document.createElement("canvas"),d=i.videoWidth/i.videoHeight;o.width=i.videoWidth/2,o.height=o.width/d,o.getContext("2d").drawImage(i,0,0,o.width,o.height);let g=null;a?o.toBlob($=>{g=new File([$],"cover.png",{type:$.type}),r(g)}):(g=o.toDataURL(),r(g)),i.pause(),i=null,o=null},s)},!0)}catch(i){n(i)}})}function Ga(e){return e.replace(/(\r\n)|(\n)/g,"<br>")}function Ka(e){let t=new FormData;t.append("test","test");for(let s in e)if(console.log(s),Array.isArray(e[s]))for(let a of e[s])t.append(s+"[]",a);else t.append(s,e[s]);return console.log(t,t.test,t.file),t}function Qa(){let e=this,t=new Date;return t.getHours()>=0&&t.getHours()<12?e.hoursTip="\u4E0A\u5348":t.getHours()>=12&&t.getHours()<18?e.hoursTip="\u4E0B\u5348":e.hoursTip="\u665A\u4E0A",e.hoursTip}function mn(e,t){let s=null;return function(){s&&clearTimeout(s),s=setTimeout(e,t)}}const k={formatTreeData:oe,getTreeParent:Ma,formatSecond:za,getAssignKeyData:Ha,arrayMerge:le,uniqueArray:Na,filterNonUnique:Wa,filterUnique:qa,filterNullObject:Ya,videoCover:Ja,formatBr:Ga,formatFormData:Ka,getDayTimeSlot:Qa},l=ye.create({baseURL:ie.apiUrl(),timeout:6e4});l.interceptors.request.use(e=>(e.headers.Authorization=window.btoa(localStorage.getItem("token")),e.data&&!e.data instanceof FormData&&(e.data=k.filterNullObject(e.data)),e.params&&(e.params=k.filterNullObject(e.params)),e),e=>Promise.reject(e));l.interceptors.response.use(e=>e.data,e=>{if(e.response){let t=e.response.data;return v.exports.Message.error(t.message),t.code===10011&&setTimeout(()=>{localStorage.removeItem("token"),self.location.href="/manage"},1e3),Promise.reject(t)}else return v.exports.Message.error(e.message),Promise.reject(!1)});class c{constructor(t=""){this.path=t}query(t){return l.get(`${this.path}/query`,{params:{id:t}})}batchQuery(t){return l.get(`${this.path}/batchQuery`,{params:t})}queryAll(t){return l.get(`${this.path}/queryAll`,{params:t})}create(t){return l.post(`${this.path}/create`,t)}update(t){return l.post(`${this.path}/update`,t)}delete(t){return l.post(`${this.path}/delete`,t)}}class Xa extends c{}var Za=new Xa("admin");class er extends c{queryAll(t){return l.get(`${this.path}/queryAll`,{params:t})}}var tr=new er("authPermission");class sr extends c{queryAll(t){return l.get(`${this.path}/queryAll`,{params:t})}}var ar=new sr("authRole");class rr extends c{verify(){return l.get(`${this.path}/captcha`)}login(t){return l.post(`${this.path}/login`,t)}logout(){return l.get(`${this.path}/logout`)}profile(){return l.get(`${this.path}/profile`)}resetPassword(t){return l.post(`${this.path}/resetPassword`,t)}}var S=new rr;class nr extends c{batchDelete(t){return l.post(`${this.path}/batchDelete`,t)}}var ir=new nr("song");class or extends c{}var lr=new or("picture");class cr extends c{}var ur=new cr("tag");class dr extends c{batchDelete(t){return l.post(`${this.path}/batchDelete`,t)}}var pr=new dr("category");class _r extends c{cancel(t){return l.post(`${this.path}/cancel`,t)}}var mr=new _r("order");class hr extends c{}var fr=new hr("promote");class vr extends c{}var gr=new vr("crowdfunding");class br extends c{}var yr=new br("orderLog");class wr extends c{}var $r=new wr("orderGoods");class xr extends c{}var Cr=new xr("adminLog");class kr extends c{}var Sr=new kr("userLog");class Tr extends c{}var Ar=new Tr("exceptionLog");class Pr extends c{disable(t){return l.post(`${this.path}/disable`,t)}logout(t){return l.post(`${this.path}/logout`,t)}}var Er=new Pr("user");class Rr extends c{index(){return l.get(`${this.path}`)}wallet(){return l.get(`${this.path}/wallet`)}walletTop(){return l.get(`${this.path}/walletTop`)}}var jr=new Rr("analysis");class Lr extends c{increment(t){return l.post(`${this.path}/increment`,t)}decrement(t){return l.post(`${this.path}/decrement`,t)}}var Or=new Lr("wallet");class Dr extends c{}var Fr=new Dr("walletTrade");class Ir extends c{}var Br=new Ir("walletDetail");class Ur extends c{updateValue(t){return l.post(`${this.path}/updateValue`,t)}}var Vr=new Ur("setting");class Mr extends c{}var zr=new Mr("payment");class Hr extends c{}var Nr=new Hr("businessLog");class qr extends c{putObject(t,s,a){return l.put(t,s,a)}imagePutSignedUrl(t){return l.get(`${this.path}/imagePutSignedUrl`,{params:t})}songPutSignedUrl(){return l.get(`${this.path}/songPutSignedUrl`)}}var Wr=new qr("oss"),Yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",admin:Za,authPermission:tr,authRole:ar,login:S,song:ir,picture:lr,tag:ur,category:pr,order:mr,promote:fr,crowdfunding:gr,orderLog:yr,orderGoods:$r,adminLog:Cr,userLog:Sr,exceptionLog:Ar,user:Er,analysis:jr,wallet:Or,walletTrade:Fr,walletDetail:Br,setting:Vr,payment:zr,businessLog:Nr,oss:Wr});const Jr={tabs:[],cachedViews:[],currentTab:{}},Gr={},Kr={async fixedTab({state:e},t){e.tabs.find(a=>a.name===t.name)||(e.tabs.splice(0,0,t),e.cachedViews.push(t.cacheTab))},async addTab({state:e,dispatch:t},s){let a=e.tabs.find(r=>r.name===s.name);a||(e.tabs.push(s),e.cachedViews.push(s.cacheTab)),t("setCurrentTab",a||s)},async setCurrentTab({state:e},t){e.currentTab=Object.assign({},t)},async deleteTab({state:e,commit:t,dispatch:s},a){let r=typeof a=="number"?a:e.tabs.findIndex(o=>o.name===a),n=e.tabs;if(n[r].closable===!1)return;let i=e.currentTab;if(n[r].name===i.name){let o=n[r+1]||n[r-1];o&&s("setCurrentTab",o)}e.tabs.splice(r,1),e.cachedViews.splice(r,1)},async deleteCachedView({state:e,dispatch:t},s){let a=typeof s=="number"?s:e.cachedViews.findIndex(r=>r===s.name);e.cachedViews.splice(a,1)},async addCachedView({state:e,dispatch:t},s){e.cachedViews.find(r=>r===s.name)||e.cachedViews.push(s.cacheTab)}};var Qr={namespaced:!0,state:Jr,mutations:Gr,actions:Kr};const Xr=[{id:2,parent_id:0,route:"",permission_name:"\u6743\u9650\u7BA1\u7406",menu_icon:"business",children:[{id:201,parent_id:2,route:"auth/admin",permission_name:"\u7BA1\u7406\u5458\u7BA1\u7406",menu_icon:""},{id:202,parent_id:2,route:"auth/role",permission_name:"\u89D2\u8272\u7BA1\u7406",menu_icon:""},{id:203,parent_id:2,route:"auth/permission",permission_name:"\u6743\u9650\u89C4\u5219",menu_icon:""}]}],ce={menu:Xr},Zr={theme:{dark:!1,aside:{dark:!0},color:{}}},en={asideTheme(e){return e.theme.aside.dark}},tn={setAsideTheme(e,t){e.theme.aside.dark=t}},sn=e=>{let t=localStorage.getItem("settings");t&&(e.state.settings=Object.assign(e.state.settings,JSON.parse(t))),e.subscribe(async(s,a)=>{let r=s.type.split("/");r[0]&&r[0]==="settings"&&localStorage.setItem("settings",JSON.stringify(a.settings))})};var ue={namespaced:!0,state:Zr,getters:en,mutations:tn,localSetting:sn};m.use(R);const an={Authorization:{token:""},user:{},permission:{route:[],menu:[...ce.menu],button:[]},config:{},home:"/"},rn={checkRoute(e){return t=>e.permission.route.includes(t)||e.user.username==="root"||t==="/"||t==="/403"||t==="/404"},checkButton(e){return t=>e.permission.button.includes(t)||e.user.username==="root"},getUser(e){return Object.keys(e.user).length?e.user:!1}},nn={setToken(e,t){e.Authorization.token=t},setUser(e,t){e.user=_(_({},e.user),t)},setPermission(e){if(e.user.username==="root")e.permission.menu=ce.menu;else{let t=Object.values(e.user.permission),s=t.filter(n=>n.permission_type===2&&n.menu_show===1),a=t.filter(n=>n.permission_type===3),r=t.filter(n=>n.permission_type===4);e.permission.menu=k.formatTreeData(s,0),e.permission.route=a.map(n=>n.route),e.permission.button=r.map(n=>n.button_key),e.home=e.permission.route[0]}}},on={async userInfo({commit:e,state:t}){try{let a=(await S.profile()).data;e("setUser",a),e("setPermission"),t.config=a.setting?a.setting:{}}catch(s){return Promise.reject(s)}},async login({dispatch:e,commit:t,state:s},a){try{let n=(await S.login(a)).data;if(localStorage.setItem("token",n),t("setToken",n),v.exports.Message.success("\u767B\u5F55\u6210\u529F"),await e("userInfo"),!s.permission.route.length&&s.user.username!=="root"){v.exports.Message.warning("\u65E0\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458");return}await T.push(s.home)}catch(r){return Promise.reject(r)}},async logout({dispatch:e,commit:t,state:s}){try{await S.logout(),localStorage.removeItem("token"),v.exports.Message.success("\u9000\u51FA\u6210\u529F"),setTimeout(()=>{self.location.href="/manage"},1e3)}catch{}}},w=new R.Store({state:an,getters:rn,mutations:nn,actions:on,modules:{tabBar:Qr,settings:ue},plugins:[ue.localSetting]});m.use(j);const T=new j({routes:[...Ua],mode:"history",base:"/manage/"});T.beforeEach((e,t,s)=>{let a=localStorage.getItem("token");if(e.path==="/login"&&!a)return s();if(!a)return s("/login");if(Object.keys(w.state.user).length===0){let r=v.exports.Loading.service({background:"#FFFFFF"});w.dispatch("userInfo").then(()=>w.getters.checkRoute(e.path)?s():s("/404")).catch(n=>{}).finally(()=>{r.close()})}else return e.path==="/login"?s("/"):w.getters.checkRoute(e.path)?s():(console.log(e.path),s("/404"))});T.afterEach((e,t)=>{if(e.meta&&e.meta.tab===!1)return;let s={title:e.meta.title,name:e.name,path:e.path,closable:!(e.meta&&e.meta.closable===!1),cacheTab:e.name};w.dispatch("tabBar/addTab",Object.assign({},s)).then(a=>{})});function ln(e=""){return v.exports.MessageBox.confirm(e,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"})}async function cn(e){try{return await we.toDataURL(e)}catch(t){return console.log(t),""}}var un={confirmWarning:ln,qrcode:cn},dn={pictureType:[{label:"Logo\u7C7B",value:3},{label:"\u6B4C\u66F2\u5C01\u9762",value:1},{label:"\u63A8\u5E7F\u56FE\u7247",value:2}],orderStatus:[{label:"\u521B\u5EFA",value:"CREATE"},{label:"\u7B49\u5F85\u652F\u4ED8",value:"WAITPAY"},{label:"\u5B8C\u6210",value:"SUCCESS"},{label:"\u53D6\u6D88",value:"CANCEL"},{label:"\u9000\u6B3E",value:"REFUND"}],payType:{WECHAT:{label:"\u5FAE\u4FE1",value:1},WALLET:{label:"\u94B1\u5305",value:8},MULTI:{label:"\u7EC4\u5408",value:9}},payStatus:{CREATE:"CREATE",WAITPAY:"WAITPAY",SUCCESS:"SUCCESS",CANCEL:"CANCEL",REFUND:"REFUND",FAIL:"FAIL"},tradeType:[{label:"\u5145\u503C",value:1},{label:"\u63D0\u73B0",value:2},{label:"\u4ED8\u6B3E",value:3},{label:"\u6536\u6B3E",value:4},{label:"\u4F17\u7B79\u5145\u503C",value:5},{label:"\u624B\u52A8\u589E\u52A0\u4F59\u989D",value:6},{label:"\u624B\u52A8\u51CF\u5C11\u4F59\u989D",value:7}],tradeStatus:[{label:"\u521B\u5EFA",value:"CREATE"},{label:"\u7B49\u5F85\u652F\u4ED8",value:"WAITPAY"},{label:"\u5B8C\u6210",value:"SUCCESS"},{label:"\u53D6\u6D88",value:"CANCEL"},{label:"\u9000\u6B3E",value:"REFUND"}],settingType:[{label:"\u7AD9\u70B9\u8BBE\u7F6E",value:1},{label:"\u4E1A\u52A1\u8BBE\u7F6E",value:2}],element:["input","select","imageSelect","radio","checkbox"],validateRule:[{rule:"required",isValue:!1},{rule:"nullable",isValue:!1},{rule:"numeric",isValue:!1},{rule:"integer",isValue:!1},{rule:"array",isValue:!1},{rule:"min",isValue:!0},{rule:"max",isValue:!0},{rule:"gt",isValue:!0},{rule:"lt",isValue:!0},{rule:"in",isValue:!0},{rule:"between",isValue:!0}],businessLogType:[{label:"sms",value:1}]};m.use($e);m.use(Us);m.use(zs);L.locale("zh-cn");m.prototype.$dayjs=L;m.prototype.Decimal=xe;m.prototype.$xss=Ce;m.prototype.$config=ie;m.prototype.$tool=un;m.prototype.$libs=k;m.prototype.$api=Yr;m.prototype.$dict=dn;new m({el:"#app",store:w,router:T,render:e=>e(Re)});export{c as B,mn as d,k as l,u as n,Wr as o,l as r,ir as s,Or as w};
