import{t as n}from"./tableFlow.31edb31e.js";import{A as l,a as r}from"./Attachment.3fb88322.js";import{n as o}from"./index.621e7bf7.js";var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",t._g(t._b({attrs:{visible:t.show,title:"\u9009\u62E9\u5C01\u9762","append-to-body":""},on:{"update:visible":function(a){t.show=a}}},"el-dialog",t.$attrs,!1),t.$listeners),[i("attachment",{on:{select:function(a){t.$emit("select",a),t.show=!1}}})],1)},h=[];const u={name:"AttachmentDialog",components:{Attachment:l,AddEditPicture:r},mixins:[n],props:{visible:{type:Boolean}},computed:{show:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},data(){return{showAllTag:!1,data:[],query:{type:null,tag:[]},tagList:[],pagination:{layout:"prev, pager, next, total,sizes, jumper",limit:20,currentPage:1,pageSizes:[10,20,30,40,50]}}},mounted(){this.getTagAll(),this.getPictureList()},methods:{selectEvent(t){this.$emit("select",t)},handleAction(t,e=null){t==="add"&&this.data.unshift(e)},async getPictureList(){this.queryLoading=!0,this.loading=!0;let t={page:this.pagination.currentPage?this.pagination.currentPage:1,limit:this.pagination.limit?this.pagination.limit:10},e=Object.assign(t,this.$libs.filterNullObject(this.query));try{let i=await this.$api.picture.batchQuery(e);this.data=i.data.data,this.total=i.data.total}catch{}finally{this.queryLoading=!1,this.loading=!1}},async getTagAll(){let t=await this.$api.tag.queryAll({type:1});this.tagList=t.data},async selcetTag(t,e){if(t.select=!t.select,this.$set(this.tagList,e,t),t.select)this.query.tag.push(t.id);else{let i=this.query.tag.findIndex(a=>a===t.id);this.query.tag.splice(i,1)}},async syncTagSelect(){for(let t of this.tagList){let e=this.query.tag.findIndex(i=>i===t.id);t.select=e>=0}},async resetQuery(){this.query=JSON.parse(JSON.stringify(this.defaultQuery)),this.syncTagSelect()}}},s={};var d=o(u,c,h,!1,g,"d599ef58",null,null);function g(t){for(let e in s)this[e]=s[e]}var m=function(){return d.exports}();export{m as A};
